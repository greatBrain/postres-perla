<style>
.main {
    z-index: 1;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* Asegúrate de que el background sea igual para un resultado idéntico */
    background: linear-gradient(#123, #111); 
    opacity: 0;
    animation: main-loadup 1s forwards linear, main-loadup-bg 10s forwards linear;
    animation-delay: 0s, 0s;
}
@keyframes main-loadup {
    from { opacity: 0; }
    to { opacity: 1; }
}
@keyframes main-loadup-bg {
    from { background-size: 100% 100%; background-position: 0% 0%; }
    to { background-size: 400% 400%; background-position: 0% 100%; }
}
.initial-snow {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
}
.initial-snow > * {   
    font-size: 50px; 
    color: white;
    position: absolute;
    top: -5vh;
    animation-name: snowfall;
    animation-timing-function: linear;
    animation-iteration-count: infinite;    
    /* El resto de propiedades de animación se establecen en línea con JS:
       animation-duration: var(--duration);
       animation-delay: var(--delay);
       left: var(--start-x);
       font-size: var(--size);
       filter: var(--blur); 
    */
}
@keyframes snowfall {
    0% {transform: translate3d(var(--left-ini), 0, 0);}
    100% {transform: translate3d(var(--left-end), 110vh, 0);}
}
</style>

<div class="main">
    <div class="initial-snow" id="snow-container">
    </div>
</div>

<script>
    const SNOW_COUNT = 50; // El número exacto de copos de nieve que deseas
    const container = document.getElementById('snow-container');    
    const randomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;    
    const randomFloat = (min, max) => (Math.random() * (max - min) + min).toFixed(2);

    for (let i = 0; i < SNOW_COUNT; i++) {
        const snowFlake = document.createElement('div');
        snowFlake.className = 'snow';
        snowFlake.innerHTML = '&#10052;';

        // Generar valores aleatorios/pseudo-aleatorios para las variables CSS
        const duration = randomInt(6, 15) + 's';
        const delay = '-' + randomInt(1, 10) + 's';
        const startX = randomInt(1, 100) + 'vw';
        
        // Desplazamiento horizontal inicial y final para la animación
        const leftIni = randomInt(-9, 10) + 'vw'; // De -9vw a 10vw
        const leftEnd = randomInt(-9, 10) + 'vw'; // De -9vw a 10vw
        
        // Tamaño y blur (filtros)
        let size, blur;
        const randomProp = Math.random();        
        // Imita la distribución de tamaño y blur de tu código original (más pequeños y borrosos en ciertos casos)
        if (randomProp < 0.2) { // Un 20% son pequeños y borrosos
            size = randomFloat(0.2, 0.4) + 'vw';
            blur = randomInt(3, 5) + 'px';
        } else if (randomProp < 0.6) { // Un 40% son medianos
            size = randomFloat(0.5, 0.8) + 'vw';
            blur = randomInt(1, 2) + 'px';
        } else { // El 40% restante son grandes y claros
            size = randomFloat(0.8, 1.2) + 'vw';
            blur = '0px';
        }
        // Aplicar las variables CSS en línea para cada copo de nieve
        snowFlake.style.cssText = `
            --duration: ${duration};
            --delay: ${delay};
            --left-ini: ${leftIni};
            --left-end: ${leftEnd};
            --size: ${size};
            --blur: blur(${blur}); /* Añadimos blur directamente como propiedad CSS */
            
            left: ${startX};
            font-size: ${size}; /* Usamos --size para font-size */
            filter: blur(${blur}); /* Aplicamos el blur directamente */
            animation-duration: ${duration};
            animation-delay: ${delay};
        `;
        container.appendChild(snowFlake);
    }
</script>